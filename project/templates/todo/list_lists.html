{% extends "todo/base.html" %}

{% block title %}{{ list_title }} Todo Lists{% endblock %}

{% block content %}
<div class="d-flex justify-content-between">
  <h1><i class="fas fa-stream"></i> {{ task_count }} tasks in {{ list_count }} list{{ list_count|pluralize }}</h1>
</div>
{% regroup lists by group as section_list %}
{% for group in section_list %}
<span class="badge bg-primary mt-3">Group: {{ group.grouper }}</span>
<ul class="list-group my-4">
  {% for task in group.list %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    <a href="{% url 'todo:list_detail' task.id task.slug %}">{{ task.name }}</a>
    <span class="badge badge-primary badge-pill">{{ task.task_set.count }}</span>
  </li>
  {% endfor %}
</ul>
{% endfor %}

<div class="mt-3">

  {% if user.is_staff %}
  <a href="{% url 'todo:add_list' %}" class="btn btn-lg btn-primary btn-block mb-4"><i class="fas fa-plus"></i> Create
    new todo list</a>
  {% else %}
  <a href="" class="btn btn-primary disabled">If you were staff, you could create a new list</a>
  {% endif %}

</div>

{% endblock %}